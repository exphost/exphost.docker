iac:
  name: docker-test-centos8-{{ lookup('env', 'BUILD_NUMBER')|default("no_build_number", true) }}
  hosts:
    docker:
      roles:
        - docker
      count: 1
      networks:
        - bridge: br105
          mac_addresses_mask: "52:54:10:01:00"
      provider:
        name: exphost.instances_libvirt
        configs:
          uri: "{{ lookup('env', 'QEMU_URI')|default('qemu:///system', true) }}"
      type: small
      disks:
        - name: sda
          pool: default
          #source: "https://cloud.centos.org/centos/7/images/CentOS-7-x86_64-GenericCloud-2009.qcow2"
          base_name: CentOS-8-GenericCloud-8.2.2004-20200611.2.x86_64.qcow2
      user_data:
        users:
          - default
          - name: provision
            groups: sudo
            shell: /bin/bash
            sudo: ['ALL=(ALL) NOPASSWD:ALL']
        ssh_pwauth: True
        chpasswd:
          list: |
            provision:provision
          expire: False
